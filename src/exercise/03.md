# Flexible Compound Components

## 📝 Your Notes

Añade tus anotaciones aquí `src/exercise/03.md`

## Background

**Brevemente:** El patron de componentes compuestos flexibles solo difiere del
ejercicio anterior en que utiliza React context. Posiblemete utilizarás más
seguido esta variante del patron.

Actualmente nuestro componente unicamente puede clonar y pasar props a sus hijos
directos. Necesitamos de alguna forma que nuestros compound components
implicitamente acepten el estado on y el metodo toggle sin importar en que parte
del arbol de elementos se esten renderizando :)

La manera en que hacemos esto es a través del contexto. `React.createContext` es
la API que necesitamos.

**Proyecto que utilizan este patrón:**

- [`@reach/accordion`](https://reacttraining.com/reach-ui/accordion)

## Ejercicio

Despliegue productivos:

- [Ejercicio](http://advanced-react-patterns.netlify.app/isolated/exercise/03.js)
- [Final](http://advanced-react-patterns.netlify.app/isolated/final/03.js)

La diferencia fundamental entre este ejercicio y el anterior es que ahora vamos
a permitirle a los desarrolladores renderizar los compound componentes en el
lugar que quieran del arbol de componentes. Buscando en `props.children` para
los componentes a clonar sería inutil, así que usaremos context en su lugar.

Tu trabajo será crear el `ToggleContext` que se usará para compartir
implícitamente el estado entre estos componentes, y luego un custom hook para
consumir ese contexto y que los componentes compuestos puedan hacer su trabajo.

## Extra Credit

### 1. 💯 custom hook validation

[Despliegue productivo](http://advanced-react-patterns.netlify.app/isolated/final/03.extra-1.js)

Modifica el componente `App` a esto:

```javascript
const App = () => <ToggleButton />
```

¿Por qué esto no funciona? ¿Puedes hallar una manera de darle al desarrollador
un mejor mensaje de error?

## 🦉 Feedback

Fill out
[the feedback form](https://ws.kcd.im/?ws=Advanced%20React%20Patterns%20%F0%9F%A4%AF&e=03%3A%20Flexible%20Compound%20Components&em=agustin.moranr%40gmail.com).
